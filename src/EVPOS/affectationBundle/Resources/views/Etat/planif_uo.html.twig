{% extends "EVPOSaffectationBundle::layout.html.twig" %}
{% block title%}{{ 'uo.planif'|trans }}{% endblock%}
{% block content %}
<div class="row">
  <div class="col-lg-12">
    <h4>{{ 'uo.planif'|trans }}</h4>
  </div>
</div>
<script>
function hideUoDone() {
  $('#tabUo').find('tr.done').hide();
}
function showUoDone() {
  $('#tabUo').find('tr.done').show();
}
</script>
<table id="tabUo" class="table table-striped table-bordered table-hover dataTable no-footer">
  <thead>
    <tr>
      <th> {{'application.code'|trans}} </th>
      <th> {{'uo.code'|trans}} </th>
      <th> {{'uo.nom'|trans}} </th>
      <th>
        {{'uo.noteAvancement'|trans}}
        <br>
        <button type="button" onclick="showUoDone()" title="">
          {{'app.all'|trans}}
        </button>
        <button type="button" onclick="hideUoDone()" title="{{'app.todo'|trans}}">
          <span class="glyphicon glyphicon-refresh"></span>
        </button>
      </th>
      <th> {{'service.numEnsemble'|trans}} </th>
    </tr>
  </thead>
  <tbody>
    {% for uo in listeUo %}
    <tr class="{% if (uo.noteAvancementMoca == "100") %} done {% endif %}">
      <td>
        <a href="{{ path('evpos_ficheAppli', { 'codeAppli': uo.appli.codeAppli }) }}">
          {{uo.appli.codeAppli}}
        </a>
      </td>
      <td>
        <a href="{{path('evpos_ficheUo', {'codeUo': uo.codeUo})}}">
          {{uo.codeUo}}
        </a>
      </td>
      <td>
        {{uo.nomUo}}
      </td>
      <td>
        <div class="{{ uo.avancementMocaIcon }}" title="{{ uo.avancementMocaDetail }}"></div>
        {{uo.avancementMoca}} - {{uo.noteAvancementMoca}}%
        <br>
        <progress value="{{ uo.noteAvancementMoca }}" max="100" title="{{uo.noteAvancementMoca}}%"></progress>
        <br>
        {{ uo.avancementMocaDetail }}
      </td>
      <td>
        <table width="100%">
          <tbody>
            {% for acces in uo.listeServiceAcces %}
              <tr>
                <td>
                  {{acces.serviceAcces.numEnsemble}}
                </td>
                <td>
                  <a href="{{ path('evpos_ficheService', { 'codeService' : acces.serviceAcces.codeService }) }}">
                    {{acces.serviceAcces.codeService}}
                  </a>
                </td>
                <td>
                  ({{acces.nbUtil}} util.)
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock%}
