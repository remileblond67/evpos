{% extends "EVPOSaffectationBundle::layout.html.twig" %}
{% block title%}{{ 'silo.liste'|trans }}{% endblock%}

{% block content %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
google.charts.load('current', {packages: ['corechart', 'bar']});
google.charts.setOnLoadCallback(drawBarColors);

function drawBarColors() {
  var data = google.visualization.arrayToDataTable([
    ['Silo', '2010 Population', '2000 Population'],
    {% for key, uo in listeUo %}
    ['{{key}}', 8175000, 8008000],
    {% endfor %}
  ]);

  var options = {
    title: 'RÃ©partition des UO dans les silos',
    chartArea: {width: '50%'},
    colors: ['#b0120a', '#ffab91'],
    hAxis: {
      title: 'Total Population',
      minValue: 0
    },
    vAxis: {
      title: 'City'
    },
    isStacked: true
  };
  var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
  chart.draw(data, options);
}
</script>

<h4>{{ 'silo.liste'|trans }}</h4>
<div id="chart_div" style="width: 900px; height: 500px;"></div>
<table class="table table-striped table-bordered table-hover dataTable no-footer sortable">
  <thead>
    <tr>
      <th class="row">{{ 'uo.nom'|trans }}</th>
      {% for silo in listeSilo %}
      <th class="row">{{ silo.nomSilo }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {{dump(listeUo) }}
    {% for key, uo in listeUo %}
    <tr>
      <td>
      {{ key }}
      </td>
      {% for colSilo in listeSilo %}
        {% for silo in colSilo %}
        <td>
          {% if (silo.idSilo == colSilo) %}
          {{ silo }}
          {% endif %}
        </td>
        {% endfor %}
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
