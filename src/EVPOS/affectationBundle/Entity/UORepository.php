<?php

namespace EVPOS\affectationBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * UORepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class UORepository extends EntityRepository
{
    /**
     * Récupération de la liste des UO
     */
    public function getListeUo() {
        $query = $this->createQueryBuilder('uo')
                ->orderBy('uo.codeUo')
                ->getQuery()
            ;

        return $query->getResult();
    }

    /**
     * Récupération d'une UO à partir de son code
     */
    public function getUo($codeUo) {
        $query = $this->createQueryBuilder('uo')
            ->setParameter('code', $codeUo)
            ->where('uo.codeUo = :code')
            ->getQuery()
        ;

        return $query->getSingleResult();
    }

    /**
     * Mise à jour des données à partir de SUAPP
     */
    public function majSUAPP() {
        $requeteSUAPP = "select id_module, code_appli, lib_module, translate(mig_moca, 'on', '10') mig_moca from app_module";
        return true;
    }
}
